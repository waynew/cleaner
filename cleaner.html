<html>
    <head>
        <title>Cleaneriffic - Wayne's World</title>
        <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="jquery.flot.js"></script>
        <script type="text/javascript" src="jquery.flot.orderBars.js"></script>
        <script type="text/javascript">
var categories = [];
var people = [];

function loadCategories(){
    categories = $.parseJSON(localStorage['categories'] || '[]');
}

function loadPeople(){
    people = $.parseJSON(localStorage['people'] || '[]');
}

function loadData(){
    loadCategories();
    loadPeople();
}

function saveCategories(){
    localStorage['categories'] = JSON.stringify(categories);
}

function savePeople(){
    localStorage['people'] = JSON.stringify(people);
}

function saveData(){
    saveCategories();
    savePeople();
}

function getCategory(){
    var category = document.getElementById('category');
    return category.value;
}

function addCategory(){
    categories.push(getCategory());
    document.getElementById('category').value = '';
    displayCategories();
    saveCategories();
}

function removeCategory(){
    var category = getCategory();
    var index = categories.indexOf(category);
    if (index > -1){
        categories.splice(index, 1);
        document.getElementById('category').value = '';
    }
    else{
        alert('<' + category + "> doesn't exist.");
    }
    displayCategories();
    saveCategories()
}

function getPerson(){
    var person = document.getElementById('person');
    return person.value;
}

function addPerson(){
    people.push(getPerson());
    document.getElementById('person').value = '';
    displayPeople();
    savePeople()
}

function removePerson(){
    var person = getPerson();
    var index = people.indexOf(person);
    if (index > -1){
        people.splice(index, 1);
        document.getElementById('person').value = '';
    }
    else{
        alert('<' + person + "> doesn't exist.");
    }
    displayPeople();
    savePeople()
}

function displayPeople(){
    var output = document.getElementById('people');
    output.innerHTML = people.join('<br />');
}

function displayCategories(){
    var output = document.getElementById('categories');
    output.innerHTML = categories.join('<br />');
}

function processKey(e, enter_id, esc_id){
    if(null == e){
        e = window.event;
    }

    if(e.keyCode == 13){
        document.getElementById(enter_id).click();
    }
    else if(e.keyCode == 27){
        document.getElementById(esc_id).click();
    }
}

$(function() { 
    var d1 = [[0, 10],
              [1, 12],
              [2, 3],
              [3, 4]];
    var d2 = [[0, 5],
              [1, 2],
              [2, 8],
              [3, 2]];
    var d3 = [[0, 8],
              [1, 13],
              [2, 9],
              [3, 10]];

 
    var ds = new Array();
 
    ds.push({
        data:d1,
        label:"KayLynn",
        bars: {
            show: true, 
            barWidth: 0.2, 
            order: 1,
            lineWidth : 2
        }
    });
    ds.push({
        data:d2,
        label:"Karyn",
        bars: {
            show: true, 
            barWidth: 0.2, 
            order: 2
        }
    });
    ds.push({
        data:d3,
        label:"Rosalyn",
        bars: {
            show: true, 
            barWidth: 0.2, 
            order: 3
        }
    });

    $.plot("#chart_div", ds);

    loadData();
    displayCategories();
    displayPeople();
    document.getElementById('category').focus();
});

        </script>
    </head>
    <body>
        <div id="chart_div" style="width:800px; height: 400px;">
        </div>
        <div style="border: thin black solid; display: inline-block;">
            Categories:
        <div id="categories" style="border-top: thin black solid">
        </div>
        <input type="text" id="category" onkeydown="processKey(event, 'add_category', 'remove_category')" />
        <button id="add_category" onclick="addCategory()">Add</button>
        <button id="remove_category" onclick="removeCategory()">Remove</button>
        </div>

        <div style="border: thin black solid; display: inline-block; vertical-align: top;">
            People:
            <div id="people" style="border-top: thin black solid; vertical-align: top;">
            </div>
            <input type="text" id="person" onkeydown="processKey(event, 'add_person', 'remove_person')" />
            <button id="add_person" onclick="addPerson()">Add</button>
            <button id="remove_person" onclick="removePerson()">Remove</button>
        </div>
    </body>
</html>
